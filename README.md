## Начало работы

1. Установить необходимую версию ноды. Информация содержится в файле `.nvmrc`, для установки достаточно использовать команду:

```bash
nvm use
```

2. После активации необходимой ноды, вводим команду для установки пакетов:

```bash
npm ci
```

3. Следующим этапом копируем `.env` и добавляем недостающие переменные:

```bash
cp .env.example .env
```

4. Поднимаем докер. В `docker-compose` заданы контейнеры для PostgreSQL и Redis, а также интерфейсы для них (необходимо убедиться, что порты свободны):

```bash
docker-compose up -d
```

5. Далее необходимо выполнить миграцию для создания таблиц в БД:

```bash
npm run migration:run
```

## Миграции

Для генерации миграции используется команда

```bash
npm run migration:generate --name=migration-name-example
```

Для создания миграции используется команда

```bash
npm run migration:create --name=migration-name-example
```

Для выполнения миграции используется команда

```bash
npm run migration:run
```

Для отката миграции используется команда

```bash
npm run migration:revert
```

## Важно! 

БД создаётся пустой (после команды `npm run migration:run` будут созданы валюты), поэтому необходимо создать пользователя. Создание/авторизация пользователя генерирует jwt-токен, без которого отправлять запросы невозможно

## Создание ТГ бота

Этот шаг необходим для получения переменных 

```
TELEGRAM_TOKEN_BOT=
TELEGRAM_NOTIFICATION_CHAT=
```

1. Создайте бота в ТГ, написав сообщение `/newbot` в телеграм `@BotFather`. При выполнении всех вы получите ссылку на чат с ботом и токен для работы с ним

2. Для создания кнопки `/getrates`, необходимо написать сообщение `/mybots` в телеграм `@BotFather`. После чего выбрать нужного бота и нажать команды `Edit Bot -> Edit Commands`. Далее нужно отправить сообщение `getrates - получить рейты`.

3. Необходимо зайти в чат с ботом и отправить сообщение `getrates`, после чего отправьте запрос на адрес `https://api.telegram.org/bot<Token>/getUpdates`, добавив свой токен

Подробности по ссылке: https://gist.github.com/nafiesl/4ad622f344cd1dc3bb1ecbe468ff9f8a

## Получение апи ключа для рейтов

Этот шаг необходим для получения переменной 

```
CURRENCYFREAKS_APIKEY=
```

Требуется регистрация на сайте `https://currencyfreaks.com/`

## Документация

Для работы с проектом существует `postman_collection.json`. Этот файл необходимо импортировать в Postman


